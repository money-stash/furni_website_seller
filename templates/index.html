<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link rel="shortcut icon" href="favicon.png" />

    <meta name="description" content="" />
    <meta name="keywords" content="bootstrap, bootstrap4" />

    <!-- Bootstrap CSS -->
    <link href="{{url_for('static', filename='css/bootstrap.min.css')}}" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet" />
    <link href="{{url_for('static', filename='css/tiny-slider.css')}}" rel="stylesheet" />
    <link href="{{url_for('static', filename='css/style.css')}}" rel="stylesheet" />
    <title>Lotos</title>
    
    <style>
      /* Боковое меню */
      .sidebar-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 9998;
        display: none;
      }
      
      .sidebar-overlay.active {
        display: block;
      }
      
      .sidebar-menu {
        position: fixed;
        top: 0;
        left: -400px;
        width: 400px;
        max-width: 90%;
        height: 100%;
        background: white;
        z-index: 9999;
        transition: left 0.3s ease;
        overflow-y: auto;
        box-shadow: 2px 0 10px rgba(0,0,0,0.1);
      }
      
      .sidebar-menu.active {
        left: 0;
      }
      
      .sidebar-header {
        padding: 20px;
        border-bottom: 1px solid #eee;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: sticky;
        top: 0;
        background: white;
        z-index: 10;
      }
      
      .sidebar-header h3 {
        margin: 0;
        font-size: 1.5rem;
      }
      
      .sidebar-close {
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: #333;
      }
      
      .sidebar-content {
        padding: 20px;
      }
      
      .category-item {
        padding: 12px 15px;
        border-bottom: 1px solid #f0f0f0;
        cursor: pointer;
        transition: background 0.2s;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      
      .category-item:hover {
        background: #f8f9fa;
      }
      
      .category-item.active {
        background: #e9ecef;
        font-weight: 600;
      }
      
      .category-name {
        font-size: 1rem;
      }
      
      .category-arrow {
        transition: transform 0.3s;
      }
      
      .category-item.active .category-arrow {
        transform: rotate(90deg);
      }
      
      .products-list {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
        background: #f8f9fa;
      }
      
      .products-list.active {
        max-height: 500px;
        overflow-y: auto;
      }
      
      .product-item {
        padding: 10px 15px 10px 30px;
        border-bottom: 1px solid #e9ecef;
        transition: background 0.2s;
      }
      
      .product-item:hover {
        background: #e9ecef;
      }
      
      .product-item a {
        text-decoration: none;
        color: #333;
        display: block;
        font-size: 0.95rem;
      }
      
      .product-item a:hover {
        color: #3b5d50;
      }
    </style>
  </head>

  <body>

    <!-- Боковое меню -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    <div class="sidebar-menu" id="sidebarMenu">
      <div class="sidebar-header">
        <h3>Всі категорії</h3>
        <button class="sidebar-close" id="sidebarClose">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="sidebar-content">
        {% for category in categories %}
        <div class="category-group">
          <div class="category-item" data-category-id="{{ category.id }}">
            <span class="category-name">{{ category.name }}</span>
            <i class="fas fa-chevron-right category-arrow"></i>
          </div>
          <div class="products-list" id="products-{{ category.id }}">
            {% for product in products %}
              {% if product.category and product.category.id == category.id %}
              <div class="product-item">
                <a href="{{ url_for('product_info', product_id=product.id) }}">
                  {{ product.name }}
                </a>
              </div>
              {% endif %}
            {% endfor %}
          </div>
        </div>
        {% endfor %}
      </div>
    </div>

    <!-- Start Header/Navigation -->
    <nav class="custom-navbar navbar navbar-expand-md navbar-dark bg-dark" aria-label="Furni navigation bar">
      <div class="container position-relative d-flex justify-content-between align-items-center">
        <a class="navbar-brand d-flex align-items-center gap-2" href="{{ url_for('index') }}">
          <img src="{{ url_for('static', filename='images/lotos_white.png') }}" alt="Lotos Logo" style="height: 62px; width: auto;">
          Lotos<span>.</span>
        </a>

        <!-- Иконки профиля и корзины всегда сверху -->
        <ul class="custom-navbar-cta navbar-nav mb-2 mb-md-0 d-flex flex-row profile-cart-icons">
          <li class="nav-item me-3">
            <a class="nav-link" href="{{ url_for('profile') }}">
              <img src="{{url_for('static', filename='images/user.svg')}}" />
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('cart') }}">
              <img src="{{url_for('static', filename='images/cart.svg')}}" />
            </a>
          </li>
        </ul>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsFurni" aria-controls="navbarsFurni" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarsFurni">
          <ul class="custom-navbar-nav navbar-nav ms-auto mb-2 mb-md-0">
            <li class="nav-item"><a class="nav-link" href="{{ url_for('index') }}">Головна</a></li>
            <li class="{% if request.endpoint == 'categories_view' %}active{% endif %}"><a class="nav-link" href="{{ url_for('categories_view') }}">Магазин</a></li>
            <li><a class="nav-link" href="{{ url_for('about') }}">Про нас</a></li>
            <li><a class="nav-link" href="{{ url_for('services') }}">Послуги</a></li>
            <li><a class="nav-link" href="{{ url_for('contact') }}">Зв'яжіться з нами</a></li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- End Header/Navigation -->

    <!-- Start Hero Section -->
    <div class="hero">
      <div class="container">
        <div class="row justify-content-between">
          <div class="col-lg-5">
            <div class="intro-excerpt">
              <h1>
                Студія Сучасного <span clsas="d-block">Дизайну Iнтер'єру</span>
              </h1>
              <p class="mb-4">
                Допоможемо у створенні сучасного дизайну інтер'єру.
              </p>
              <p>
                <a href="{{url_for('categories_view')}}" class="btn btn-secondary me-2">Купуйте зараз</a
                ><a href="{{url_for('categories_view')}}" class="btn btn-white-outline">Пошук</a>
              </p>
            </div>
          </div>
          <div class="col-lg-7">
            <div class="hero-img-wrap">
              <img class="krovat" src="{{url_for('static', filename='images/krovat-Photoroom.png')}}" class="img-fluid" />
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- End Hero Section -->

    <!-- Start Product Section -->
    <div class="product-section">
      <div class="container">
        <div class="row">
          <div class="col-md-12 col-lg-3 mb-5 mb-lg-0">
            <h2 class="mb-4 section-title">Виготовлено з чудового матеріалу.</h2>
            <p class="mb-4">
              Кожен виріб створений із любов'ю до деталей. Ми використовуємо лише перевірені матеріали, які поєднують міцність, довговічність і стиль.
            </p>
            <p><button class="btn" id="openSidebar">Всі категорії</button></p>
          </div>

        {% if (categories is defined and categories|length > 0) or (selected_categories and selected_categories|length > 0) %}
          {% set cats = categories if categories is defined else selected_categories %}
          {% set cats = cats|sort(attribute='name') %}
          {% set cats = cats|sort(attribute='tier') %}
          <div class="col-12 col-md-9">
            <div class="row g-3">
              {% for cat in cats %}
              <div class="col-6 col-sm-6 col-md-4 col-lg-3">
                <a href="{{ url_for('shop', category=(cat.name)|lower) }}" class="text-decoration-none">
                  <div class="category-card card h-100 shadow-sm">
                    <div class="category-image">
                      {% if cat.image_url %}
                        <img src="{{ cat.image_url }}" alt="{{ cat.name }}" loading="lazy" />
                      {% elif cat.image_path %}
                        <img src="{{ url_for('static', filename=cat.image_path) }}" alt="{{ cat.name }}" loading="lazy" />
                      {% else %}
                        <div class="no-image">Немає фото</div>
                      {% endif %}
                    </div>
                    <div class="card-body d-flex align-items-center justify-content-center">
                      <h5 class="category-title text-center mb-0">{{ cat.name }}</h5>
                    </div>
                  </div>
                </a>
              </div>
              {% endfor %}
            </div>
          </div>
        {% else %}
          <div class="col-12 col-md-9">
            <div class="alert alert-info">Категорії не вибрані.</div>
          </div>
        {% endif %}
        </div>
      </div>
    </div>
    <!-- End Product Section -->


    <!-- Start Why Choose Us Section -->
    <div class="why-choose-section">
      <div class="container">
        <div class="row justify-content-between">
          <div class="col-lg-6">
            <h2 class="section-title">Чому варто обрати нас</h2>
            <p>
              Кожен виріб створений із любов'ю до деталей. Ми використовуємо лише перевірені матеріали, які поєднують міцність, довговічність і стиль.
            </p>

            <div class="row my-5">
              <div class="col-6 col-md-6">
                <div class="feature">
                  <div class="icon">
                    <img src="{{url_for('static', filename='images/truck.svg')}}" alt="Image" class="imf-fluid" />
                  </div>
                  <h3>Швидка &amp; та безкоштовна доставка</h3>
                  <p>
                    Ми доставляємо меблі по всій Україні без додаткових витрат. Ваше замовлення приїде швидко та в ідеальному стані.
                  </p>
                </div>
              </div>

              <div class="col-6 col-md-6">
                <div class="feature">
                  <div class="icon">
                    <img src="{{url_for('static', filename='images/bag.svg')}}" alt="Image" class="imf-fluid" />
                  </div>
                  <h3>Зручні покупки онлайн</h3>
                  <p>
                    Простий інтерфейс і детальні фото допоможуть легко обрати меблі, не виходячи з дому. Купуйте в один клік!
                  </p>
                </div>
              </div>

              <div class="col-6 col-md-6">
                <div class="feature">
                  <div class="icon">
                    <img
                      src="{{url_for('static', filename='images/support.svg')}}"
                      alt="Image"
                      class="imf-fluid"
                    />
                  </div>
                  <h3>Підтримка 24/7</h3>
                  <p>
                    Наша команда завжди на зв'язку — допоможемо з вибором, замовленням чи будь-якими питаннями у будь-який час.
                  </p>
                </div>
              </div>

              <div class="col-6 col-md-6">
                <div class="feature">
                  <div class="icon">
                    <img
                      src="{{url_for('static', filename='images/return.svg')}}"
                      alt="Image"
                      class="imf-fluid"
                    />
                  </div>
                  <h3>Безпроблемне повернення</h3>
                  <p>
                    Якщо товар не підійшов — повернення або обмін без зайвих питань. Ми цінуємо довіру кожного клієнта.
                  </p>
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-5">
            <div class="img-wrap">
              <img
                src="{{url_for('static', filename='images/why-choose-us-img.jpg')}}"
                alt="Image"
                class="img-fluid"
              />
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- End Why Choose Us Section -->

   <!-- Start We Help Section -->
  <div class="we-help-section">
    <div class="container">
      <div class="row align-items-center">
        <!-- Слайдер изображений -->
        <div class="col-lg-7 mb-5 mb-lg-0">
          <div id="weHelpCarousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img src="{{ url_for('static', filename='images/img-grid-1.jpg') }}" class="d-block w-100 rounded" alt="Image 1">
              </div>
              <div class="carousel-item">
                <img src="{{ url_for('static', filename='images/img-grid-2.jpg') }}" class="d-block w-100 rounded" alt="Image 2">
              </div>
              <div class="carousel-item">
                <img src="{{ url_for('static', filename='images/img-grid-3.jpg') }}" class="d-block w-100 rounded" alt="Image 3">
              </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#weHelpCarousel" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#weHelpCarousel" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>
        </div>

        <!-- Текстовая часть -->
        <div class="col-lg-5 ps-lg-5">
          <h2 class="section-title mb-4">
            Ми допоможемо вам створити сучасний дизайн інтер'єру
          </h2>
          <p>
            Ми віримо, що інтер'єр — це не просто меблі, а відображення вашого стилю та комфорту. Наша команда допоможе вам підібрати рішення, які гармонійно поєднують естетику, функціональність і сучасні тенденції.
          </p>

          <ul class="list-unstyled custom-list my-4">
            <li>Індивідуальний підбір меблів під ваш простір</li>
            <li>Допомога з вибором кольорів і матеріалів</li>
            <li>Розробка концепції дизайну під будь-який стиль</li>
            <li>Професійна установка та сервісна підтримка</li>
          </ul>
          <p><a href="{{ url_for('categories_view') }}" class="btn btn-primary">Пошук</a></p>
        </div>
      </div>
    </div>
  </div>
  <!-- End We Help Section -->


  <!-- Start Testimonial Slider -->
      <div class="testimonial-section">
        <div class="container">
          <div class="row">
            <div class="col-lg-7 mx-auto text-center">
              <h2 class="section-title">Відгуки</h2>
            </div>
          </div>

          <div class="row justify-content-center">
            <div class="col-lg-12">
              <div class="testimonial-slider-wrap text-center">
                <div id="testimonial-nav">
                  <span class="prev" data-controls="prev"
                    ><span class="fa fa-chevron-left"></span
                  ></span>
                  <span class="next" data-controls="next"
                    ><span class="fa fa-chevron-right"></span
                  ></span>
                </div>

                <div class="testimonial-slider">
                  <div class="item">
                    <div class="row justify-content-center">
                      <div class="col-lg-8 mx-auto">
                        <div class="testimonial-block text-center">
                          <blockquote class="mb-5">
                            <p>
                              &ldquo;Замовляла шафу у Lotos — доставка прийшла навіть швидше, ніж очікувала! Якість на висоті, тканина приємна на дотик, усе виглядає дорого. Дуже сподобався сервіс — менеджер допоміг підібрати колір під мій інтер'єр. Тепер планую купити ще стіл у цій компанії.&rdquo;
                            </p>
                          </blockquote>

                          <div class="author-info">
                            <div class="author-pic">
                              <img
                                src="{{url_for('static', filename='images/0.jpeg')}}"
                                alt="Maria Jones"
                                class="img-fluid"
                              />
                            </div>
                            <h3 class="font-weight-bold">Олена Мельник</h3>
                            <span class="position d-block mb-3"
                              >Київ</span
                            >
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- END item -->

                  <div class="item">
                    <div class="row justify-content-center">
                      <div class="col-lg-8 mx-auto">
                        <div class="testimonial-block text-center">
                          <blockquote class="mb-5">
                            <p>
                              &ldquo;Меблі супер! Брав спальню «під ключ» — доставка, збірка, усе зробили швидко й акуратно. Видно, що Lotos дбає про клієнтів. Найприємніше, що фото на сайті повністю відповідають реальності. Рекомендую друзям!&rdquo;
                            </p>
                          </blockquote>

                          <div class="author-info">
                            <div class="author-pic">
                              <img
                                src="{{url_for('static', filename='images/secpers.jpeg')}}"
                                alt="Maria Jones"
                                class="img-fluid"
                              />
                            </div>
                            <h3 class="font-weight-bold">Андрій Мазур</h3>
                            <span class="position d-block mb-3"
                              >Львів</span
                            >
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- END item -->

                  <div class="item">
                    <div class="row justify-content-center">
                      <div class="col-lg-8 mx-auto">
                        <div class="testimonial-block text-center">
                          <blockquote class="mb-5">
                            <p>
                              &ldquo;Дуже задоволена покупкою! Замовляла шафу-купе. Матеріали якісні, фурнітура міцна, виглядає стильно. Особливо сподобалось, що в Lotos можна зробити замовлення під індивідуальні розміри — і все виконали точно. Дякую за професійний підхід ❤️&rdquo;
                            </p>
                          </blockquote>

                          <div class="author-info">
                            <div class="author-pic">
                              <img
                                src="{{url_for('static', filename='images/katya4.jpg')}}"
                                alt="Maria Jones"
                                class="img-fluid"
                              />
                            </div>
                            <h3 class="font-weight-bold">Катерина Мартинюк</h3>
                            <span class="position d-block mb-3"
                              >Полтава</span
                            >
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- END item -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- End Testimonial Slider -->

    <!-- Start Footer Section -->
    <footer class="footer-section">
      <div class="container relative">       

        <div class="row g-5 mb-5">
          <div class="col-lg-4">
            <div class="mb-4 footer-logo-wrap">
              <a href="{{ url_for('index') }}" class="footer-logo d-flex align-items-center gap-2">
                <img src="{{ url_for('static', filename='images/lotos_dark.png') }}" alt="Lotos Logo" style="height:62px; width:auto;">
                Lotos<span>.</span>
              </a>
            </div>
            <p class="mb-4">
              Lotos — це більше, ніж просто магазин меблів. Ми створюємо простір, у якому вам хочеться жити, відпочивати й надихатись.
            </p>

            <ul class="list-unstyled custom-social">
              <li>
                <a href="https://www.instagram.com/lotos_mebel_ua"><span class="fa fa-brands fa-instagram"></span></a>
              </li>
            </ul>
          </div>

          <div class="col-lg-8">
            <div class="row links-wrap">
              <div class="col-6 col-sm-6 col-md-3">
                <ul class="list-unstyled">
                  <li><a class="nav-link" href="{{ url_for('about') }}">Про нас</a></li>
                  <li><a class="nav-link" href="{{ url_for('services') }}">Послуги</a></li>
                  <li><a class="nav-link" href="{{ url_for('contact') }}">Зв'яжіться з нами</a></li>
                </ul>
              </div>

              <div class="col-6 col-sm-6 col-md-3">
                <ul class="list-unstyled">
                  <li><a class="nav-link" href="{{ url_for('contact') }}">Послуги</a></li>
                </ul>
              </div>

              <div class="col-6 col-sm-6 col-md-3">
                <ul class="list-unstyled">
                  
                  <li><a href="{{ url_for('terms') }}"> Угода користувача </a></li>
                  <li><a class="nav-link" href="{{ url_for('guarantee') }}">Гарантія</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <div class="border-top copyright">
          <div class="row pt-4">
            <div class="col-lg-6">
              <p class="mb-2 text-center text-lg-start">
                Copyright &copy;
                <script>
                  document.write(new Date().getFullYear());
                </script>
                . All Rights Reserved. &mdash; Designed with love
              </p>
            </div>
          </div>
        </div>
      </div>
    </footer>
    <!-- End Footer Section -->

    <script src="{{url_for('static', filename='js/bootstrap.bundle.min.js')}}"></script>
    <script src="{{url_for('static', filename='js/tiny-slider.js')}}"></script>
    <script src="{{url_for('static', filename='js/custom.js')}}"></script>
    
    <script>
      // Управление боковым меню
      const sidebar = document.getElementById('sidebarMenu');
      const overlay = document.getElementById('sidebarOverlay');
      const openBtn = document.getElementById('openSidebar');
      const closeBtn = document.getElementById('sidebarClose');
      
      // Открыть меню
      openBtn.addEventListener('click', () => {
        sidebar.classList.add('active');
        overlay.classList.add('active');
        document.body.style.overflow = 'hidden';
      });
      
      // Закрыть меню
      const closeSidebar = () => {
        sidebar.classList.remove('active');
        overlay.classList.remove('active');
        document.body.style.overflow = '';
      };
      
      closeBtn.addEventListener('click', closeSidebar);
      overlay.addEventListener('click', closeSidebar);
      
      // Раскрытие списка товаров при клике на категорию
      document.querySelectorAll('.category-item').forEach(item => {
        item.addEventListener('click', function() {
          const categoryId = this.dataset.categoryId;
          const productsList = document.getElementById(`products-${categoryId}`);
          
          // Закрыть все другие категории
          document.querySelectorAll('.category-item').forEach(cat => {
            if (cat !== this) {
              cat.classList.remove('active');
            }
          });
          document.querySelectorAll('.products-list').forEach(list => {
            if (list !== productsList) {
              list.classList.remove('active');
            }
          });
          
          // Переключить текущую категорию
          this.classList.toggle('active');
          productsList.classList.toggle('active');
        });
      });
    </script>
  </body>
</html>