<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin - Product Management</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/admin-panel-styles.css') }}">
  <style>
    .category-row {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 8px;
      border-bottom: 1px solid #eaeaea;
      transition: all 0.2s ease;
      cursor: move;
      background: white;
    }
    .category-row:hover {
      background: #f8f9fa;
    }
    .category-row.drag-over {
      border-top: 3px solid #2f72d6;
      background: #e3f2fd;
    }
    .category-row[draggable="true"] {
      user-select: none;
    }
    .drag-handle {
      cursor: grab;
      padding: 0 8px;
      color: #666;
      font-size: 18px;
      transition: color 0.2s;
    }
    .drag-handle:hover {
      color: #2f72d6;
    }
    .category-row:active .drag-handle {
      cursor: grabbing;
    }
    .category-thumb {
      width: 56px;
      height: 56px;
      object-fit: cover;
      border-radius: 6px;
      background: #f5f5f5;
      border: 1px solid #ddd;
    }
    .no-thumb {
      width: 56px;
      height: 56px;
      display:flex;
      align-items:center;
      justify-content:center;
      border-radius:6px;
      background:#fafafa;
      border:1px dashed #ccc;
      color:#666;
      font-size:12px;
      text-align:center;
      padding:4px;
    }
    .category-name { flex: 1; font-weight:500; }
    .category-actions { display:flex; align-items:center; gap:8px; }
    .upload-label {
      display:inline-block;
      padding:6px 10px;
      border-radius:4px;
      background:#2f72d6;
      color:white;
      cursor:pointer;
      font-size:14px;
      text-decoration:none;
      transition: background 0.2s;
    }
    .upload-label:hover {
      background: #1e5bb8;
    }
    .delete-btn {
      padding:6px 10px;
      border-radius:4px;
      background:#e04646;
      color:white;
      cursor:pointer;
      border: none;
      font-size:14px;
      transition: background 0.2s;
    }
    .delete-btn:hover {
      background: #c93535;
    }
    .upload-input { display:none; }
    .upload-status { font-size:13px; color:#666; min-width:84px; text-align:right; }
  </style>
</head>
<body>
<nav class="admin-nav">
  <a href="{{ url_for('admin.admin_panel') }}" class="nav-btn">–ì–æ–ª–æ–≤–Ω–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è</a>
  <a href="{{ url_for('admin.admin_products') }}" class="nav-btn">–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ç–æ–≤–∞—Ä–∞–º–∏</a>
  <a href="{{ url_for('admin.admin_settings') }}" class="nav-btn">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–∞–π—Ç—É</a>
</nav>

<div class="admin-container">
  <h1>–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ç–æ–≤–∞—Ä–∞–º–∏</h1>

  <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
  <section class="section">
    <h2>–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó</h2>
    <p style="color: #666; font-size: 14px; margin-bottom: 12px;">
      üí° –ü–µ—Ä–µ—Ç—è–≥—É–π—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó, —â–æ–± –∑–º—ñ–Ω–∏—Ç–∏ —ó—Ö –ø–æ—Ä—è–¥–æ–∫
    </p>
    <form id="category-form">
      <input type="text" id="category-name" placeholder="–ù–∞–∑–≤–∞ –Ω–æ–≤–æ—ó –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó" required>
      <button type="submit">–î–æ–¥–∞—Ç–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ—é</button>
    </form>
    <div id="category-list" aria-live="polite"></div>
  </section>

  <!-- –¢–æ–≤–∞—Ä—ã -->
  <section class="section">
    <h2>–¢–æ–≤–∞—Ä–∏</h2>
    <form id="product-form" action="{{ url_for('products.add_product') }}" method="post" enctype="multipart/form-data">
      <input type="text" id="product-name" name="product-name" placeholder="–ù–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É" required>
      <select id="product-category" name="product-category" required>
        <option value="">–í–∏–±–µ—Ä—ñ—Ç—å –∫–∞—Ç–µ–≥–æ—Ä—ñ—é</option>
      </select>
      <textarea id="product-description" name="product-description" placeholder="–û–ø–∏—Å"></textarea>

      <label>–ê—Ç—Ä–∏–±—É—Ç–∏</label>
      <div id="attributes-container">
        <div class="attribute-wrapper">
          <input type="text" name="attribute" placeholder="–ê—Ç—Ä–∏–±—É—Ç (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —à–∏—Ä–∏–Ω–∞: 50—Å–º)">
          <button type="button" class="delete-btn" onclick="this.parentElement.remove()">√ó</button>
        </div>
      </div>
      <button type="button" id="add-attribute-btn">–î–æ–¥–∞—Ç–∏ –∞—Ç—Ä–∏–±—É—Ç</button>

      <label>–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø—Ä–µ–≤'—é</label>
      <input type="file" id="product-preview" name="product-preview" accept="image/*">
      <div id="preview-container" class="preview-container"></div>

      <label>–î–æ–¥–∞—Ç–∫–æ–≤—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è</label>
      <input type="file" id="product-images" name="product-images" accept="image/*" multiple>
      <div id="images-container" class="preview-container"></div>

      <button type="submit">–î–æ–¥–∞—Ç–∏ —Ç–æ–≤–∞—Ä (–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏)</button>
    </form>

    <ul id="product-list"></ul>
  </section>
</div>

<script>
  window.URLS = {
    delete_category: "{{ url_for('categories.delete_category') }}",
    add_category: "{{ url_for('categories.add_category') }}",
    upload_category_image: "{{ url_for('categories.upload_category_image') }}",
    reorder_categories: "{{ url_for('categories.reorder_categories') }}"
  };
  window.INITIAL_CATEGORIES = {{ categories | tojson }};
</script>

<script src="{{ url_for('static', filename='js/admin-panel.js') }}"></script>
</body>
</html>